(function(){"use strict";let I;const Y=new Uint8Array(16);function W(){if(!I&&(I=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!I))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return I(Y)}const c=[];for(let t=0;t<256;++t)c.push((t+256).toString(16).slice(1));function X(t,e=0){return c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]}const p={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function y(t,e,i){if(p.randomUUID&&!e&&!t)return p.randomUUID();t=t||{};const r=t.random||(t.rng||W)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){i=i||0;for(let a=0;a<16;++a)e[i+a]=r[a];return e}return X(r)}const L={TEXT:"text",NUMBER:"number",EMAIL:"email",TEL:"tel"},k=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,z=/^(\+\d{1,3}[- ]?)?\d{10}$/,U=t=>t===""||t===null||t===void 0,H=t=>{if(!t)throw new Error("Input is required");const e=t.type,i=t.value,r=t.required;if(e===L.NUMBER){const a=t.min===void 0?Number.MIN_SAFE_INTEGER:t.min,_=t.max===void 0?Number.MAX_SAFE_INTEGER:t.max;if(i<a)throw new Error("This field cannot go below "+a);if(i>_)throw new Error("This field cannot go above "+_);if(r&&U(i))throw new Error("This field is required")}if(e===L.EMAIL&&!k.test(i))throw new Error("Invalid email address");if(e===L.TEL&&!z.test(i))throw new Error("Invalid phone number");if(r&&U(i))throw new Error("This field is required")},g=t=>{try{return H(t),{success:!0}}catch(e){return{error:e.message}}};class G{constructor(){this.currentSectionId=null,this.parentMap=new Map,this.childrenMap=new Map}addSection(e,i){this.childrenMap.has(e)||this.childrenMap.set(e,[]),i.forEach(r=>{this.parentMap.set(r.id,e),this.childrenMap.get(e).push({id:r.id,name:r.name,type:r.type})})}setCurrentSectionId(e){this.currentSectionId=e}getParent(e){return this.parentMap.get(e)}getChildren(e){return this.childrenMap.get(e)||[]}}const j="flowly-",h="next-button",C="prev-button",B="error",m="input-id",b="section-id",F="element",v="section",u=t=>`${j}${t}`,J=u(h),K=u(C),Q=u(B),Z=u(v),tt=u(b),et=u(m),nt=u(m),rt=u(F),S={NEXT_BUTTON_ATTRIBUTE_NAME:h,PREV_BUTTON_ATTRIBUTE_NAME:C,ERROR_ATTRIBUTE_NAME:B,INPUT_ELEMENT_ID_ATTRIBUTE_NAME:m,SECTION_ATTRIBUTE_NAME:v,SECTION_ATTRIBUTE_ID_NAME:b,FLOWLY_ELEMENT_ATTRIBUTE_NAME:F},d={FORM:{NEXT_BUTTON_SELECTOR:J,PREV_BUTTON_SELECTOR:K,ERROR_SELECTOR:Q,SECTION_SELECTOR:Z,SECTION_ID_SELECTOR:tt,INPUT_SELECTOR:nt,SUBMIT_SELECTOR:'[type="submit"]',INPUT_ID_SELECTOR:et,FLOWLY_ELEMENT_SELECTOR:rt}},it=t=>t?t.querySelectorAll(`[${d.FORM.FLOWLY_ELEMENT_SELECTOR}=${S.SECTION_ATTRIBUTE_NAME}]`):null,w=(t,e=!0)=>{if(!t)return null;const i=e?S.NEXT_BUTTON_ATTRIBUTE_NAME:S.PREV_BUTTON_ATTRIBUTE_NAME;return t.querySelector(`[${d.FORM.FLOWLY_ELEMENT_SELECTOR}=${i}]`)},D=t=>t.getAttribute(d.FORM.INPUT_ID_SELECTOR),ot=(t,e)=>t.setAttribute(d.FORM.INPUT_ID_SELECTOR,e),Et=(t,e)=>t.querySelector(`[${d.FORM.INPUT_ID_SELECTOR}="${e}"]`),st=t=>t.getAttribute(d.FORM.SECTION_ID_SELECTOR),{SECTION_ATTRIBUTE_NAME:x,FLOWLY_ELEMENT_ATTRIBUTE_NAME:mt}=S,{FORM:{FLOWLY_ELEMENT_SELECTOR:P,SECTION_ID_SELECTOR:ct,SUBMIT_SELECTOR:at}}=d,lt=".w-form",V=({element:t,attributeName:e,value:i})=>{let r=t;for(;r&&(r=r.parentNode,!(r&&r.getAttribute(e)===i||r.nodeName==="BODY")););return r};(({initialIndex:t=0,form:e})=>{let i=t;const r=new G;let a={};const _=it(document),Tt=()=>(f,{currentIndex:i,inputState:a}),ut=({section:n})=>{const o=A({section:n});let E=!0;return o&&o.forEach(l=>{const T=g(l),s=l.nextElementSibling;T!=null&&T.error?(E=!1,s.innerHTML=T.error):s&&(s.innerHTML="")}),E},N=({section:n,isActive:o,isInitialize:E=!1})=>{n&&(o?(n.style.transition=E?"":"opacity 0.3s ease-in-out",n.style.display="block",n.style.opacity="1"):(n.style.transition=E?"":"opacity 0.3s ease-in-out",n.style.opacity="0",E?n.style.display="none":setTimeout(()=>{n.style.display="none"},300)))},$=({index:n,nextIndex:o})=>{N({section:_[n],isActive:!1}),setTimeout(()=>{N({section:_[o],isActive:!0})},300),i=o},A=({section:n})=>{const o=n.querySelectorAll("input"),E=n.querySelectorAll("select"),l=n.querySelectorAll("textarea");return[...[...o].filter(s=>s.type!=="submit"),...E,...l]},dt=({section:n})=>{A({section:n}).forEach(E=>{const l=y(E.name);ot(E,l),a[l]={name:E.name,value:""},E.addEventListener("change",T=>{const s=D(T.target);a[s]&&(a[s].value=E.value)})})},_t=n=>{n.preventDefault();const o=V({element:n.target,attributeName:P,value:x});ut({section:o})&&new FormData(n.target)};return{initializeForm:()=>{e.querySelector(at).addEventListener("submit",_t),[..._].forEach((n,o)=>{const E=y();n.setAttribute(ct,E),dt({section:n}),r.addSection(E,A({section:n}).map(s=>({id:D(s),name:s.name,type:s.type,value:s.value}))),N({section:n,isActive:o===0,isInitialize:!0});const l=w(n,!0),T=w(n,!1);l&&l.addEventListener("click",s=>{s.preventDefault();const M=V({element:s.target,attributeName:P,value:x});if(M){const It=st(M),St=r.getChildren(It);let q=!0;if(St.forEach(({id:Rt})=>{const O=Et(M,Rt),R=g(O);R!=null&&R.error?(q=!1,O.nextElementSibling.innerHTML=R.error):O.nextElementSibling.innerHTML=""}),!q)return;$({index:o,nextIndex:o+1})}}),T&&T.addEventListener("click",s=>{s.preventDefault(),o!==0&&$({index:o,nextIndex:o-1})})})},getState:Tt}})({initialIndex:0,form:document.querySelector(lt)}).initializeForm()})();
